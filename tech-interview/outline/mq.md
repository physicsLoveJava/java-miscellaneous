
### 消息中间件

1. 异步通讯
2. 解耦
3. 并发缓冲

#### 消息发送一致性
业务成功，后要保证消息发送成功
使用常规的消息队列，无法实现可靠消息一致性的方案！

### 消息中间件处理分布式事务解决方案

1. 主动方向消息系统发送信息，该信息只是预发送的消息，并不会被发送给被动方
2. 消息系统将预发送消息存储
3. 业务操作进行处理
4. 业务将业务操作结果发送给消息队列
5. 如果处理失败，将预发送消息删除
6. 如果处理成功，则将预发送消息状态标记为待发送
7. 消息系统负责将消息发送给被动方应用

异常情况需要考虑，
1. 发送给消息队列失败
2. 消息队列发送给被动方失败

处理方法：
1. 如果消息存储，而业务未执行 --> 查询业务结果，如果不存在则进行删除消息
2. 如果消息存储，同时业务执行 --> 查询业务结果，如果成功，则进行消息的投递

### 消息队列模型的特点
1. 消息生产者，将消息放入消息队列中
2. 消息消费者，从队列中消费消息，然后删除
3. 消息不会重复消费，每个消息只会被单个消费者消费

