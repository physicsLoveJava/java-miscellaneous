
### 服务化中的分布式事务的解决方案？
1. 异步通知
2. TCC
3. 最大努力型通知
4. 2pc or 3pc

### 标准分布式事务
AP: 应用程序
RM: 资源管理器 --> 数据库，消息队列，管理具体的资源， XA规范
TM: 事务管理，管理全局的事务，

XA接口就是事务管理器和资源管理器的通信

缺点：
1. 准备阶段，持久化成本
2. 故障带来脆弱性
3. 牺牲可用性，对性能影响比较大（可拓展性不高）

### BASE
BA: 基本可用性，允许分区失败
S: 软件状态，允许短时的不同步
E: 最终一致性

A（Atomic) 与 D（durability)必须要保证
一致性和隔离性（可用性和服务降级考虑）

### CAP
C：数据一致性
A: 可用性
P：分区容错性

对于特定系统，需要针对系统的特定进行选择。

### 柔性事务
服务模式：
1. 可查询操作
2. 幂等操作
3. TCC操作
4. 可补偿操作

解决方案：
1. TCC（事务补偿）
2. 异步通知
3. 最大努力型通知

### TCC
存在于服务层，有着较高的开发成本
1. try
    1. 完成所有的业务检查
    2. 预留必须业务资源
2. confirm
    1. 真正执行业务
    2. Confirm操作要满足幂等性
    3. 只使用Try阶段预留的业务资源
3. cancel
    1. 释放Try阶段预留的业务资源
    2. Cancel操作要满足幂等性
    



